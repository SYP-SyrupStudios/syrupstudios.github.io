<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Simple Game</title>
</head>
<body>
<script>
const script = document.createElement('script');
script.src = 'https://syrupstudios.github.io/ast.syrupstudios.github.io/API/UIBuilder.js';
script.onload = function() {
    createElement('div', {
        id: 'gameWindow',
        classes: ['game-window'],
        style: {
            width: '485px',
            height: '402px',
            border: '2px solid #000',
            position: 'relative'
        },
        children: [
            document.createElement('div'),
        ],
        html: '<div class="player" id="player"></div>',
        css: `
            .player {
                width: 50px;
                height: 50px;
                background-color: blue;
                position: absolute;
            }

              body {
                margin: 0;
                padding: 0;
                display: flex;
                justify-content: center;
                align-items: center;
                height: 100vh;
                background-color: #f0f0f0;
              }
        `
    });

    const Window = document.getElementById('gameWindow');
    const Player = document.getElementById('player');

    // Get the width and height of the element
    let widthWindow = Window.clientWidth;
    let heightWindow = Window.clientHeight;

    let widthPlayer = Player.clientWidth;
    let heightPlayer = Player.clientHeight;

    // Center the player element within the window
    const initialX = widthWindow / 2 - widthPlayer / 2;
    const initialY = heightWindow / 2 - heightPlayer / 2;
    let posX = initialX;
    let posY = initialY;

    Player.style.position = 'absolute';
    Player.style.left = `${posX}px`;
    Player.style.top = `${posY}px`;

    // Keyboard controls
    const keys = {};

    document.addEventListener('keydown', function(event) {
        keys[event.key] = true;
    });

    document.addEventListener('keyup', function(event) {
        keys[event.key] = false;
    });

    // Move player function
    const movePlayer = () => {
        const speed = 5;

        if (keys['ArrowLeft']) {
            posX -= speed;
        }
        if (keys['ArrowRight']) {
            posX += speed;
        }
        if (keys['ArrowUp']) {
            posY -= speed;
        }
        if (keys['ArrowDown']) {
            posY += speed;
        }

        // Keep the player within the canvas bounds
        posX = Math.max(0, Math.min(widthWindow - widthPlayer, posX));
        posY = Math.max(0, Math.min(heightWindow - heightPlayer, posY));

        Player.style.left = `${posX}px`;
        Player.style.top = `${posY}px`;
    };

    // Continuous movement loop
    const moveLoop = () => {
        movePlayer();
        requestAnimationFrame(moveLoop);
    };

    moveLoop();
};

document.head.appendChild(script);
</script>
</body>
</html>
